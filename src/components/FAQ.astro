---
import Container from "./ui/Container.astro";
import Section from "./ui/Section.astro";

const { showHeader = true } = Astro.props;

const questions = [
  {
    question: "Какие сроки изготовления кухни на заказ?",
    answer: "В среднем срок изготовления кухни составляет 30–45 рабочих дней после утверждения проекта и подписания договора. Точные сроки фиксируем в договоре."
  },
  {
    question: "Предоставляете ли вы гарантию на мебель?",
    answer: "Да. Гарантия 24 месяца на корпуса и 12 месяцев на фурнитуру. Мы уверены в качестве каждой детали."
  },
  {
    question: "Выезжает ли замерщик на дом и сколько это стоит?",
    answer: "Да, выезд замерщика бесплатный в пределах Сочи, Адлера и Красной Поляны."
  },
  {
    question: "Из каких материалов вы изготавливаете мебель?",
    answer: "Мы используем ЛДСП Egger, МДФ в эмали и пленке, натуральный шпон, акриловые панели. Фурнитура — Blum, Hettich, Hafele."
  },
  {
    question: "Что входит в стоимость дизайн-проекта?",
    answer: "При заказе мебели полный дизайн-проект с 3D-визуализацией предоставляется бесплатно."
  },
  {
    question: "Работаете ли вы по договору?",
    answer: "Да, мы заключаем официальный договор со сроками, материалами, сметой и гарантиями."
  }
];
---
<Section class="faq" container={false}>
  <Container>
    {showHeader && (
      <div class="faq-header">
        <span class="eyebrow">FAQ</span>
        <h2>Ответы на вопросы</h2>
        <p>Коротко и по делу. Если нужен индивидуальный расчет — свяжитесь с нами.</p>
      </div>
    )}
    <div class="accordion">
      {questions.map((item, index) => (
        <div class="accordion-item">
          <button 
            class="accordion-trigger" 
            aria-expanded="false" 
            aria-controls={`faq-content-${index + 1}`} 
            id={`faq-trigger-${index + 1}`}
          >
            <span class="accordion-title">{item.question}</span>
            <span class="accordion-icon" aria-hidden="true">+</span>
          </button>
          <div 
            class="accordion-content" 
            id={`faq-content-${index + 1}`} 
            aria-labelledby={`faq-trigger-${index + 1}`} 
            role="region"
            hidden
          >
            <p>{item.answer}</p>
          </div>
        </div>
      ))}
    </div>
  </Container>
</Section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const accordionItems = document.querySelectorAll('.accordion-item');

    accordionItems.forEach(item => {
      const trigger = item.querySelector('.accordion-trigger');
      const content = item.querySelector('.accordion-content');
      const icon = item.querySelector('.accordion-icon');
      
      if (!trigger || !content || !icon) return;

      trigger.addEventListener('click', () => {
        const isExpanded = trigger.getAttribute('aria-expanded') === 'true';
        
        trigger.setAttribute('aria-expanded', String(!isExpanded));
        content.hidden = isExpanded;
        icon.textContent = isExpanded ? '+' : '–';
      });
    });
  });
</script>

<style>
  .faq-header {
    text-align: center;
    margin-bottom: var(--space-10);
  }
  .faq-header .eyebrow {
    justify-content: center;
  }
  .faq-header h2 {
    margin-top: var(--space-4);
    margin-bottom: var(--space-4);
  }
  .faq-header p {
    margin-left: auto;
    margin-right: auto;
  }
  .accordion {
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    background: var(--surface);
  }
  .accordion-item {
    border-bottom: 1px solid var(--border);
  }
  .accordion-item:last-child {
    border-bottom: none;
  }
  .accordion-trigger {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: var(--space-6) var(--space-7);
    background: none;
    border: none;
    cursor: pointer;
    font-family: var(--font-display);
    font-size: 1.35rem;
    font-weight: 600;
    text-align: left;
    color: var(--text);
    transition: background-color var(--transition);
  }
  .accordion-trigger:hover {
    background-color: rgba(214, 179, 106, 0.08);
  }
  .accordion-title { padding-right: var(--space-4); }
  .accordion-icon {
    font-size: 1.4rem;
    color: var(--accent);
    width: 1.6rem;
    text-align: center;
  }
  .accordion-content {
    padding: 0 var(--space-7) var(--space-6);
  }
  .accordion-content p {
    margin: 0;
    font-size: var(--font-size-body);
    color: var(--muted);
  }

  @media (max-width: 768px) {
    .accordion-trigger {
      padding: var(--space-5) var(--space-5);
      font-size: 1.15rem;
    }
    .accordion-content {
      padding: 0 var(--space-5) var(--space-5);
    }
  }
</style>
