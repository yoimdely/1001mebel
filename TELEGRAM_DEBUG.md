# üî¥ Telegram Submission Debug Guide

## –ü—Ä–æ–±–ª–µ–º–∞
–ó–∞—è–≤–∫–∞ –∏–∑ –∫–≤–∏–∑–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Telegram, —Ö–æ—Ç—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏.

## –ü—Ä–∏—á–∏–Ω—ã
–§—É–Ω–∫—Ü–∏—è `/submit-quiz` –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –¥–≤—É—Ö environment variables –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ Cloudflare Pages:
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram –±–æ—Ç–∞
- `TELEGRAM_CHAT_ID` - ID —á–∞—Ç–∞ –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞—è–≤–∫–∏

## –†–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Environment Variables –≤ Cloudflare Pages

### –®–ê–ì 1: –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å Cloudflare Pages
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Cloudflare Dashboard](https://dash.cloudflare.com)
2. Pages ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **1001–º–µ–±–µ–ª—å.—Ä—Ñ**
3. Settings ‚Üí Environment variables

### –®–ê–ì 2: –î–æ–±–∞–≤—å—Ç–µ Production Environment Variables

**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 1: TELEGRAM_BOT_TOKEN**
- **Name:** `TELEGRAM_BOT_TOKEN`
- **Value:** `<–í–∞—à —Ç–æ–∫–µ–Ω –±–æ—Ç–∞>` (–ü–æ–ª—É—á–∏—Ç—å —É @BotFather –≤ Telegram)
- **Environments:** `Production`

**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 2: TELEGRAM_CHAT_ID**  
- **Name:** `TELEGRAM_CHAT_ID`
- **Value:** `<ID –≤–∞—à–µ–≥–æ —á–∞—Ç–∞>`
- **Environments:** `Production`

> –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å–∏–ª–∏ preview environment - –¥–æ–±–∞–≤—å—Ç–µ —Ç–µ –∂–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç—É–¥–∞ —Ç–æ–∂–µ

### –®–ê–ì 3: Redeploy (–ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞)
–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å:
1. Pages ‚Üí Deployments
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π deployment
3. –ù–∞–∂–º–∏—Ç–µ "Retry deployment" –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø–∞–ø–∫–∏ `out`

### –®–ê–ì 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ü–æ—Å–ª–µ redeploy:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–≤–∏–∑–∞ –Ω–∞ —Å–∞–π—Ç–µ
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
4. –ù–∞–∂–º–∏—Ç–µ "–ø–æ–ª—É—á–∏—Ç—å —Ä–∞—Å—á–µ—Ç"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ö–æ–¥—è—â–∏–µ –≤ Telegram –±–æ—Ç–µ

## –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ ID —á–∞—Ç–∞?

### –ü–æ–ª—É—á–∏—Ç—å TELEGRAM_BOT_TOKEN
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ @BotFather
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /newbot
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º BotFather
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π token –≤–∏–¥–∞: 123456789:ABCdefGHIjklmnoPQRstuvWXYZabcdef
```

### –ü–æ–ª—É—á–∏—Ç—å TELEGRAM_CHAT_ID
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–≤–æ–π –±–æ—Ç –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: https://api.telegram.org/bot<–í–ê–®_TOKEN>/getUpdates
4. –ù–∞–π–¥–∏—Ç–µ "chat": { "id": -123456789 }
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ id (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –≥—Ä—É–ø–ø)
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Google Forms

–ï—Å–ª–∏ Telegram –±–æ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Google Forms:

```javascript
// –í functions/submit-quiz.js –∑–∞–º–µ–Ω–∏—Ç–µ sendToTelegram –Ω–∞:
const formUrl = "https://docs.google.com/forms/d/e/YOUR_FORM_ID/formResponse";
const params = new URLSearchParams({
  "entry.FIELD_ID_1": data.name,
  "entry.FIELD_ID_2": data.phone,
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
});

await fetch(formUrl, { method: "POST", body: params });
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Worker

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
1. Pages ‚Üí 1001–º–µ–±–µ–ª—å.—Ä—Ñ ‚Üí Analytics
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ requests –ª–æ–≥–∏ –¥–ª—è `/submit-quiz`
3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ 500 - –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
4. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –æ—Ç Telegram API - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ ID —á–∞—Ç–∞

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ curl (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Worker –≤–æ–æ–±—â–µ
curl -X POST https://1001–º–µ–±–µ–ª—å.—Ä—Ñ/submit-quiz \
  -H "Content-Type: application/json" \
  -d '{"name":"Test","phone":"79991234567"}'

# –ï—Å–ª–∏ —É–≤–∏–¥–∏—Ç–µ "Missing Telegram environment variables" - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
```

## –ï—Å–ª–∏ –ø–æ—Å–ª–µ redeploy –≤—Å—ë –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –û—á–∏—Å—Ç–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä cache (Ctrl+Shift+Del)
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–≤–∏–∑ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫—É –≤ Console
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫—É –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ

---

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏
- [x] –ö–æ–¥ Worker –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ‚úÖ
- [x] Fetch –∑–∞–ø—Ä–æ—Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ‚úÖ  
- [x] –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ out/functions/ ‚úÖ
- [ ] **Environment variables —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ Cloudflare ‚Üê –¢–£–¢ –ü–†–û–ë–õ–ï–ú–ê**
- [ ] Deployment –ø–µ—Ä–µ—Ä–∞–∑–≤—ë—Ä–Ω—É—Ç –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
